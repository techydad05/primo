import{S as Fe,i as Oe,s as Ie,e as ae,b as B,d as K,f as De,g as Q,h as u,J as we,k as d,y as Te,a as H,q as R,l as m,m as h,z as Me,c as V,r as W,n as c,H as n,A as He,R as G,L as de,W as Ue,u as Ve,v as Ce,M as Re,N as We,B as Be,a2 as qe,I as se}from"../chunks/index.7ce6af5d.js";import{p as ze,n as Je}from"../chunks/stores.fb720b2c.js";import{f as je}from"../chunks/index.ffa02d79.js";import{p as Ge}from"../chunks/parse.bee59afc.js";import{k as Ke}from"../chunks/singletons.d2d14c82.js";import{b as Qe,I as Xe}from"../chunks/navigation.2516ba35.js";import{S as Ye}from"../chunks/ServerLogo.34fd066a.js";function Ze(r){return Ke.apply_action(r)}function $e(r){const t=JSON.parse(r);return t.data&&(t.data=Ge(t.data)),t}function Ae(r){return HTMLElement.prototype.cloneNode.call(r)}function xe(r,t=()=>{}){const a=async({action:e,result:s,reset:i})=>{s.type==="success"&&(i!==!1&&HTMLFormElement.prototype.reset.call(r),await Qe()),(location.origin+location.pathname===e.origin+e.pathname||s.type==="redirect"||s.type==="error")&&Ze(s)};async function l(e){var C,v,A,N;if(((C=e.submitter)!=null&&C.hasAttribute("formmethod")?e.submitter.formMethod:Ae(r).method)!=="post")return;e.preventDefault();const i=new URL((v=e.submitter)!=null&&v.hasAttribute("formaction")?e.submitter.formAction:Ae(r).action),p=new FormData(r),f=(A=e.submitter)==null?void 0:A.getAttribute("name");f&&p.append(f,((N=e.submitter)==null?void 0:N.getAttribute("value"))??"");const _=new AbortController;let b=!1;const q=await t({action:i,cancel:()=>b=!0,controller:_,get data(){return p},formData:p,get form(){return r},formElement:r,submitter:e.submitter})??a;if(b)return;let P;try{const g=await fetch(i,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:p,signal:_.signal});P=$e(await g.text()),P.type==="error"&&(P.status=g.status)}catch(g){if((g==null?void 0:g.name)==="AbortError")return;P={type:"error",error:g}}q({action:i,get data(){return p},formData:p,get form(){return r},formElement:r,update:g=>a({action:i,result:P,reset:g==null?void 0:g.reset}),result:P})}return HTMLFormElement.prototype.addEventListener.call(r,"submit",l),{destroy(){HTMLFormElement.prototype.removeEventListener.call(r,"submit",l)}}}function Pe(r){let t,a;return{c(){t=d("p"),a=R(`Welcome to your new Primo server! Enter an email address and password you'll use to
							administrate this server.`),this.h()},l(l){t=m(l,"P",{class:!0});var e=h(t);a=W(e,`Welcome to your new Primo server! Enter an email address and password you'll use to
							administrate this server.`),e.forEach(u),this.h()},h(){c(t,"class","svelte-12uu9cv")},m(l,e){B(l,t,e),n(t,a)},d(l){l&&u(t)}}}function Se(r){let t,a;return{c(){t=d("div"),a=R(r[5]),this.h()},l(l){t=m(l,"DIV",{class:!0});var e=h(t);a=W(e,r[5]),e.forEach(u),this.h()},h(){c(t,"class","error svelte-12uu9cv")},m(l,e){B(l,t,e),n(t,a)},p(l,e){e&32&&Ve(a,l[5])},d(l){l&&u(t)}}}function Le(r){let t,a,l,e,s,i,p;return{c(){t=d("label"),a=d("span"),l=R("Confirm password"),e=H(),s=d("input"),this.h()},l(f){t=m(f,"LABEL",{class:!0});var _=h(t);a=m(_,"SPAN",{});var b=h(a);l=W(b,"Confirm password"),b.forEach(u),e=V(_),s=m(_,"INPUT",{type:!0,name:!0,class:!0}),_.forEach(u),this.h()},h(){c(s,"type","password"),c(s,"name","password"),c(s,"class","svelte-12uu9cv"),c(t,"class","svelte-12uu9cv")},m(f,_){B(f,t,_),n(t,a),n(a,l),n(t,e),n(t,s),G(s,r[1]),i||(p=de(s,"input",r[11]),i=!0)},p(f,_){_&2&&s.value!==f[1]&&G(s,f[1])},d(f){f&&u(t),i=!1,p()}}}function et(r){let t,a,l;return a=new Xe({props:{icon:"gg:spinner"}}),{c(){t=d("div"),Te(a.$$.fragment),this.h()},l(e){t=m(e,"DIV",{class:!0});var s=h(t);Me(a.$$.fragment,s),s.forEach(u),this.h()},h(){c(t,"class","icon svelte-12uu9cv")},m(e,s){B(e,t,s),He(a,t,null),l=!0},p:se,i(e){l||(Q(a.$$.fragment,e),l=!0)},o(e){K(a.$$.fragment,e),l=!1},d(e){e&&u(t),Be(a)}}}function tt(r){let t;function a(s,i){return s[4]?st:at}let l=a(r),e=l(r);return{c(){e.c(),t=ae()},l(s){e.l(s),t=ae()},m(s,i){e.m(s,i),B(s,t,i)},p(s,i){l!==(l=a(s))&&(e.d(1),e=l(s),e&&(e.c(),e.m(t.parentNode,t)))},i:se,o:se,d(s){e.d(s),s&&u(t)}}}function at(r){let t,a;return{c(){t=d("span"),a=R("Sign up")},l(l){t=m(l,"SPAN",{});var e=h(t);a=W(e,"Sign up"),e.forEach(u)},m(l,e){B(l,t,e),n(t,a)},d(l){l&&u(t)}}}function st(r){let t,a;return{c(){t=d("span"),a=R("Sign in")},l(l){t=m(l,"SPAN",{});var e=h(t);a=W(e,"Sign in"),e.forEach(u)},m(l,e){B(l,t,e),n(t,a)},d(l){l&&u(t)}}}function Ne(r){let t,a,l,e,s,i,p,f,_,b=r[4]?"Sign in":"Create your account",I,q,P,C,v,A,N,g,re,le,D,ne,F,X,oe,ie,T,ue,ce,M,S,L,Y,Z,fe,z,pe,me;s=new Ye({});let k=!r[4]&&Pe(),y=r[5]&&Se(r),E=!r[4]&&Le(r);const _e=[tt,et],O=[];function ve(o,w){return o[6]?1:0}return S=ve(r),L=O[S]=_e[S](r),{c(){t=d("main"),a=d("div"),l=d("div"),e=d("div"),Te(s.$$.fragment),i=H(),p=d("div"),f=d("header"),_=d("h1"),I=R(b),q=H(),k&&k.c(),P=H(),y&&y.c(),C=H(),v=d("form"),A=d("div"),N=d("label"),g=d("span"),re=R("Email"),le=H(),D=d("input"),ne=H(),F=d("label"),X=d("span"),oe=R("Password"),ie=H(),T=d("input"),ue=H(),E&&E.c(),ce=H(),M=d("button"),L.c(),this.h()},l(o){t=m(o,"MAIN",{class:!0});var w=h(t);a=m(w,"DIV",{class:!0});var U=h(a);l=m(U,"DIV",{class:!0});var he=h(l);e=m(he,"DIV",{class:!0});var be=h(e);Me(s.$$.fragment,be),be.forEach(u),he.forEach(u),i=V(U),p=m(U,"DIV",{class:!0});var J=h(p);f=m(J,"HEADER",{class:!0});var $=h(f);_=m($,"H1",{class:!0});var ge=h(_);I=W(ge,b),ge.forEach(u),q=V($),k&&k.l($),$.forEach(u),P=V(J),y&&y.l(J),C=V(J),v=m(J,"FORM",{class:!0,method:!0,action:!0});var x=h(v);A=m(x,"DIV",{class:!0});var j=h(A);N=m(j,"LABEL",{class:!0});var ee=h(N);g=m(ee,"SPAN",{});var ye=h(g);re=W(ye,"Email"),ye.forEach(u),le=V(ee),D=m(ee,"INPUT",{type:!0,name:!0,class:!0}),ee.forEach(u),ne=V(j),F=m(j,"LABEL",{class:!0});var te=h(F);X=m(te,"SPAN",{});var Ee=h(X);oe=W(Ee,"Password"),Ee.forEach(u),ie=V(te),T=m(te,"INPUT",{type:!0,name:!0,class:!0}),te.forEach(u),ue=V(j),E&&E.l(j),j.forEach(u),ce=V(x),M=m(x,"BUTTON",{class:!0,type:!0});var ke=h(M);L.l(ke),ke.forEach(u),x.forEach(u),J.forEach(u),U.forEach(u),w.forEach(u),this.h()},h(){c(e,"class","logo-container svelte-12uu9cv"),c(l,"class","logo svelte-12uu9cv"),c(_,"class","svelte-12uu9cv"),c(f,"class","svelte-12uu9cv"),c(D,"type","text"),c(D,"name","email"),c(D,"class","svelte-12uu9cv"),c(N,"class","svelte-12uu9cv"),c(T,"type","password"),c(T,"name","password"),c(T,"class","svelte-12uu9cv"),c(F,"class","svelte-12uu9cv"),c(A,"class","fields svelte-12uu9cv"),c(M,"class","button svelte-12uu9cv"),c(M,"type","submit"),M.disabled=Y=r[4]?!1:r[3],c(v,"class","form svelte-12uu9cv"),c(v,"method","POST"),c(v,"action",Z="?/"+(r[4]?"sign_in":"sign_up")),c(p,"class","box svelte-12uu9cv"),c(a,"class","left svelte-12uu9cv"),c(t,"class","primo-reset svelte-12uu9cv")},m(o,w){B(o,t,w),n(t,a),n(a,l),n(l,e),He(s,e,null),n(a,i),n(a,p),n(p,f),n(f,_),n(_,I),n(f,q),k&&k.m(f,null),n(p,P),y&&y.m(p,null),n(p,C),n(p,v),n(v,A),n(A,N),n(N,g),n(g,re),n(N,le),n(N,D),G(D,r[2]),n(A,ne),n(A,F),n(F,X),n(X,oe),n(F,ie),n(F,T),G(T,r[0]),n(A,ue),E&&E.m(A,null),n(v,ce),n(v,M),O[S].m(M,null),z=!0,pe||(me=[de(D,"input",r[9]),de(T,"input",r[10]),Ue(xe.call(null,v))],pe=!0)},p(o,w){(!z||w&16)&&b!==(b=o[4]?"Sign in":"Create your account")&&Ve(I,b),o[4]?k&&(k.d(1),k=null):k||(k=Pe(),k.c(),k.m(f,null)),o[5]?y?y.p(o,w):(y=Se(o),y.c(),y.m(p,C)):y&&(y.d(1),y=null),w&4&&D.value!==o[2]&&G(D,o[2]),w&1&&T.value!==o[0]&&G(T,o[0]),o[4]?E&&(E.d(1),E=null):E?E.p(o,w):(E=Le(o),E.c(),E.m(A,null));let U=S;S=ve(o),S===U?O[S].p(o,w):(Ce(),K(O[U],1,1,()=>{O[U]=null}),De(),L=O[S],L?L.p(o,w):(L=O[S]=_e[S](o),L.c()),Q(L,1),L.m(M,null)),(!z||w&24&&Y!==(Y=o[4]?!1:o[3]))&&(M.disabled=Y),(!z||w&16&&Z!==(Z="?/"+(o[4]?"sign_in":"sign_up")))&&c(v,"action",Z)},i(o){z||(Q(s.$$.fragment,o),Q(L),fe||Re(()=>{fe=We(t,je,{}),fe.start()}),z=!0)},o(o){K(s.$$.fragment,o),K(L),z=!1},d(o){o&&u(t),Be(s),k&&k.d(),y&&y.d(),E&&E.d(),O[S].d(),pe=!1,qe(me)}}}function rt(r){let t=r[4],a,l,e=Ne(r);return{c(){e.c(),a=ae()},l(s){e.l(s),a=ae()},m(s,i){e.m(s,i),B(s,a,i),l=!0},p(s,[i]){i&16&&Ie(t,t=s[4])?(Ce(),K(e,1,1,se),De(),e=Ne(s),e.c(),Q(e,1),e.m(a.parentNode,a)):e.p(s,i)},i(s){l||(Q(e),l=!0)},o(s){K(e),l=!1},d(s){s&&u(a),e.d(s)}}}function lt(r,t,a){let l,e,s,i,p;we(r,ze,v=>a(8,i=v)),we(r,Je,v=>a(6,p=v));let{form:f}=t,_=i.url.searchParams.get("email")||"",b="",I="";function q(){_=this.value,a(2,_)}function P(){b=this.value,a(0,b)}function C(){I=this.value,a(1,I)}return r.$$set=v=>{"form"in v&&a(7,f=v.form)},r.$$.update=()=>{r.$$.dirty&128&&a(5,l=f==null?void 0:f.error),r.$$.dirty&256&&a(4,e=!i.url.searchParams.has("signup")),r.$$.dirty&3&&a(3,s=!b||b!==I)},[b,I,_,s,e,l,p,f,i,q,P,C]}class dt extends Fe{constructor(t){super(),Oe(this,t,lt,rt,Ie,{form:7})}}export{dt as component};
//# sourceMappingURL=6.6a7c3e39.js.map
