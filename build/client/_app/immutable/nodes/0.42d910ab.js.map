{"version":3,"mappings":"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","names":["decoder","decodeBase64","encoded","binary","bytes","i","decode","input","base64url.decode","__create","__defProp","__getOwnPropDesc","__getOwnPropNames","__getProtoOf","__hasOwnProp","__commonJS","cb","mod","__copyProps","to","from","except","desc","key","__toESM","isNodeMode","target","require_cookie","exports","parse3","serialize3","__toString","fieldContentRegExp","str","options","obj","opt","dec","index","eqIdx","endIdx","val","tryDecode","name","enc","encode","value","maxAge","expires","isDate","priority","sameSite","decode2","import_cookie2","import_cookie","parseSupabaseCookie","session","_header","payloadStr","_signature","payload","exp","sub","user","err","stringifySupabaseSession","_a","isBrowser","DEFAULT_COOKIE_OPTIONS","CookieAuthStorageAdapter","cookieOptions","sessionStr","BrowserCookieAuthStorageAdapter","createSupabaseClient","supabaseUrl","supabaseKey","bowser","createClient","SvelteKitLoadAuthStorageAdapter","serverSession","cachedBrowserClient","createSupabaseLoadClient","event","browser","isBrowser2","client","load","supabase","PUBLIC_SUPABASE_URL","PUBLIC_SUPABASE_PUBLIC_KEY","redirect","sites","server_member","collaborator","user_final","user_sites","site","data","$$props","onMount","subscription","_session","invalidate","__vitePreload","html","css","registerProcessors","setContext","loadIcons","enableCache","$$invalidate","supabase_client"],"sources":["../../../../../../node_modules/jose/dist/browser/lib/buffer_utils.js","../../../../../../node_modules/jose/dist/browser/runtime/base64url.js","../../../../../../node_modules/jose/dist/browser/util/base64url.js","../../../../../../node_modules/@supabase/auth-helpers-shared/dist/index.mjs","../../../../../../node_modules/@supabase/auth-helpers-sveltekit/dist/index.js","../../../../../../src/routes/+layout.js","../../../../../../src/routes/+layout.svelte"],"sourcesContent":["import digest from '../runtime/digest.js';\nexport const encoder = new TextEncoder();\nexport const decoder = new TextDecoder();\nconst MAX_INT32 = 2 ** 32;\nexport function concat(...buffers) {\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\n    const buf = new Uint8Array(size);\n    let i = 0;\n    buffers.forEach((buffer) => {\n        buf.set(buffer, i);\n        i += buffer.length;\n    });\n    return buf;\n}\nexport function p2s(alg, p2sInput) {\n    return concat(encoder.encode(alg), new Uint8Array([0]), p2sInput);\n}\nfunction writeUInt32BE(buf, value, offset) {\n    if (value < 0 || value >= MAX_INT32) {\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\n    }\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\n}\nexport function uint64be(value) {\n    const high = Math.floor(value / MAX_INT32);\n    const low = value % MAX_INT32;\n    const buf = new Uint8Array(8);\n    writeUInt32BE(buf, high, 0);\n    writeUInt32BE(buf, low, 4);\n    return buf;\n}\nexport function uint32be(value) {\n    const buf = new Uint8Array(4);\n    writeUInt32BE(buf, value);\n    return buf;\n}\nexport function lengthAndInput(input) {\n    return concat(uint32be(input.length), input);\n}\nexport async function concatKdf(secret, bits, value) {\n    const iterations = Math.ceil((bits >> 3) / 32);\n    const res = new Uint8Array(iterations * 32);\n    for (let iter = 0; iter < iterations; iter++) {\n        const buf = new Uint8Array(4 + secret.length + value.length);\n        buf.set(uint32be(iter + 1));\n        buf.set(secret, 4);\n        buf.set(value, 4 + secret.length);\n        res.set(await digest('sha256', buf), iter * 32);\n    }\n    return res.slice(0, bits >> 3);\n}\n","import { encoder, decoder } from '../lib/buffer_utils.js';\nexport const encodeBase64 = (input) => {\n    let unencoded = input;\n    if (typeof unencoded === 'string') {\n        unencoded = encoder.encode(unencoded);\n    }\n    const CHUNK_SIZE = 0x8000;\n    const arr = [];\n    for (let i = 0; i < unencoded.length; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, unencoded.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join(''));\n};\nexport const encode = (input) => {\n    return encodeBase64(input).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n};\nexport const decodeBase64 = (encoded) => {\n    const binary = atob(encoded);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n};\nexport const decode = (input) => {\n    let encoded = input;\n    if (encoded instanceof Uint8Array) {\n        encoded = decoder.decode(encoded);\n    }\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, '');\n    try {\n        return decodeBase64(encoded);\n    }\n    catch (_a) {\n        throw new TypeError('The input to be decoded is not correctly encoded.');\n    }\n};\n","import * as base64url from '../runtime/base64url.js';\nexport const encode = base64url.encode;\nexport const decode = base64url.decode;\n","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\n\n// ../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js\nvar require_cookie = __commonJS({\n  \"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js\"(exports) {\n    \"use strict\";\n    exports.parse = parse3;\n    exports.serialize = serialize3;\n    var __toString = Object.prototype.toString;\n    var fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n    function parse3(str, options) {\n      if (typeof str !== \"string\") {\n        throw new TypeError(\"argument str must be a string\");\n      }\n      var obj = {};\n      var opt = options || {};\n      var dec = opt.decode || decode;\n      var index = 0;\n      while (index < str.length) {\n        var eqIdx = str.indexOf(\"=\", index);\n        if (eqIdx === -1) {\n          break;\n        }\n        var endIdx = str.indexOf(\";\", index);\n        if (endIdx === -1) {\n          endIdx = str.length;\n        } else if (endIdx < eqIdx) {\n          index = str.lastIndexOf(\";\", eqIdx - 1) + 1;\n          continue;\n        }\n        var key = str.slice(index, eqIdx).trim();\n        if (void 0 === obj[key]) {\n          var val = str.slice(eqIdx + 1, endIdx).trim();\n          if (val.charCodeAt(0) === 34) {\n            val = val.slice(1, -1);\n          }\n          obj[key] = tryDecode(val, dec);\n        }\n        index = endIdx + 1;\n      }\n      return obj;\n    }\n    function serialize3(name, val, options) {\n      var opt = options || {};\n      var enc = opt.encode || encode;\n      if (typeof enc !== \"function\") {\n        throw new TypeError(\"option encode is invalid\");\n      }\n      if (!fieldContentRegExp.test(name)) {\n        throw new TypeError(\"argument name is invalid\");\n      }\n      var value = enc(val);\n      if (value && !fieldContentRegExp.test(value)) {\n        throw new TypeError(\"argument val is invalid\");\n      }\n      var str = name + \"=\" + value;\n      if (null != opt.maxAge) {\n        var maxAge = opt.maxAge - 0;\n        if (isNaN(maxAge) || !isFinite(maxAge)) {\n          throw new TypeError(\"option maxAge is invalid\");\n        }\n        str += \"; Max-Age=\" + Math.floor(maxAge);\n      }\n      if (opt.domain) {\n        if (!fieldContentRegExp.test(opt.domain)) {\n          throw new TypeError(\"option domain is invalid\");\n        }\n        str += \"; Domain=\" + opt.domain;\n      }\n      if (opt.path) {\n        if (!fieldContentRegExp.test(opt.path)) {\n          throw new TypeError(\"option path is invalid\");\n        }\n        str += \"; Path=\" + opt.path;\n      }\n      if (opt.expires) {\n        var expires = opt.expires;\n        if (!isDate(expires) || isNaN(expires.valueOf())) {\n          throw new TypeError(\"option expires is invalid\");\n        }\n        str += \"; Expires=\" + expires.toUTCString();\n      }\n      if (opt.httpOnly) {\n        str += \"; HttpOnly\";\n      }\n      if (opt.secure) {\n        str += \"; Secure\";\n      }\n      if (opt.priority) {\n        var priority = typeof opt.priority === \"string\" ? opt.priority.toLowerCase() : opt.priority;\n        switch (priority) {\n          case \"low\":\n            str += \"; Priority=Low\";\n            break;\n          case \"medium\":\n            str += \"; Priority=Medium\";\n            break;\n          case \"high\":\n            str += \"; Priority=High\";\n            break;\n          default:\n            throw new TypeError(\"option priority is invalid\");\n        }\n      }\n      if (opt.sameSite) {\n        var sameSite = typeof opt.sameSite === \"string\" ? opt.sameSite.toLowerCase() : opt.sameSite;\n        switch (sameSite) {\n          case true:\n            str += \"; SameSite=Strict\";\n            break;\n          case \"lax\":\n            str += \"; SameSite=Lax\";\n            break;\n          case \"strict\":\n            str += \"; SameSite=Strict\";\n            break;\n          case \"none\":\n            str += \"; SameSite=None\";\n            break;\n          default:\n            throw new TypeError(\"option sameSite is invalid\");\n        }\n      }\n      return str;\n    }\n    function decode(str) {\n      return str.indexOf(\"%\") !== -1 ? decodeURIComponent(str) : str;\n    }\n    function encode(val) {\n      return encodeURIComponent(val);\n    }\n    function isDate(val) {\n      return __toString.call(val) === \"[object Date]\" || val instanceof Date;\n    }\n    function tryDecode(str, decode2) {\n      try {\n        return decode2(str);\n      } catch (e) {\n        return str;\n      }\n    }\n  }\n});\n\n// src/browserCookieStorage.ts\nvar import_cookie2 = __toESM(require_cookie());\n\n// src/utils/cookies.ts\nvar import_cookie = __toESM(require_cookie());\nimport { base64url } from \"jose\";\nfunction parseSupabaseCookie(str) {\n  if (!str) {\n    return null;\n  }\n  try {\n    const session = JSON.parse(str);\n    if (!session) {\n      return null;\n    }\n    if (session.constructor.name === \"Object\") {\n      return session;\n    }\n    if (session.constructor.name !== \"Array\") {\n      throw new Error(`Unexpected format: ${session.constructor.name}`);\n    }\n    const [_header, payloadStr, _signature] = session[0].split(\".\");\n    const payload = base64url.decode(payloadStr);\n    const decoder = new TextDecoder();\n    const { exp, sub, ...user } = JSON.parse(decoder.decode(payload));\n    return {\n      expires_at: exp,\n      expires_in: exp - Math.round(Date.now() / 1e3),\n      token_type: \"bearer\",\n      access_token: session[0],\n      refresh_token: session[1],\n      provider_token: session[2],\n      provider_refresh_token: session[3],\n      user: {\n        id: sub,\n        factors: session[4],\n        ...user\n      }\n    };\n  } catch (err) {\n    console.warn(\"Failed to parse cookie string:\", err);\n    return null;\n  }\n}\nfunction stringifySupabaseSession(session) {\n  var _a;\n  return JSON.stringify([\n    session.access_token,\n    session.refresh_token,\n    session.provider_token,\n    session.provider_refresh_token,\n    ((_a = session.user) == null ? void 0 : _a.factors) ?? null\n  ]);\n}\n\n// src/utils/helpers.ts\nfunction isBrowser() {\n  return typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\n}\n\n// src/utils/constants.ts\nvar DEFAULT_COOKIE_OPTIONS = {\n  path: \"/\",\n  maxAge: 60 * 60 * 24 * 365 * 1e3\n};\n\n// src/cookieAuthStorageAdapter.ts\nvar CookieAuthStorageAdapter = class {\n  constructor(cookieOptions) {\n    this.cookieOptions = {\n      ...DEFAULT_COOKIE_OPTIONS,\n      ...cookieOptions\n    };\n  }\n  getItem(key) {\n    const value = this.getCookie(key);\n    if (!value)\n      return null;\n    if (key.endsWith(\"-code-verifier\")) {\n      return value;\n    }\n    return JSON.stringify(parseSupabaseCookie(value));\n  }\n  setItem(key, value) {\n    if (key.endsWith(\"-code-verifier\")) {\n      this.setCookie(key, value);\n      return;\n    }\n    let session = JSON.parse(value);\n    const sessionStr = stringifySupabaseSession(session);\n    this.setCookie(key, sessionStr);\n  }\n  removeItem(key) {\n    this.deleteCookie(key);\n  }\n};\n\n// src/browserCookieStorage.ts\nvar BrowserCookieAuthStorageAdapter = class extends CookieAuthStorageAdapter {\n  constructor(cookieOptions) {\n    super(cookieOptions);\n  }\n  getCookie(name) {\n    if (!isBrowser())\n      return null;\n    const cookies = (0, import_cookie2.parse)(document.cookie);\n    return cookies[name];\n  }\n  setCookie(name, value) {\n    if (!isBrowser())\n      return null;\n    document.cookie = (0, import_cookie2.serialize)(name, value, {\n      ...this.cookieOptions,\n      httpOnly: false\n    });\n  }\n  deleteCookie(name) {\n    if (!isBrowser())\n      return null;\n    document.cookie = (0, import_cookie2.serialize)(name, \"\", {\n      ...this.cookieOptions,\n      maxAge: 0,\n      httpOnly: false\n    });\n  }\n};\n\n// src/createClient.ts\nimport { createClient } from \"@supabase/supabase-js\";\nfunction createSupabaseClient(supabaseUrl, supabaseKey, options) {\n  var _a;\n  const bowser = isBrowser();\n  return createClient(supabaseUrl, supabaseKey, {\n    ...options,\n    auth: {\n      flowType: \"pkce\",\n      autoRefreshToken: bowser,\n      detectSessionInUrl: bowser,\n      persistSession: true,\n      storage: options.auth.storage,\n      ...((_a = options.auth) == null ? void 0 : _a.storageKey) ? {\n        storageKey: options.auth.storageKey\n      } : {}\n    }\n  });\n}\nvar export_parseCookies = import_cookie.parse;\nvar export_serializeCookie = import_cookie.serialize;\nexport {\n  BrowserCookieAuthStorageAdapter,\n  CookieAuthStorageAdapter,\n  DEFAULT_COOKIE_OPTIONS,\n  createSupabaseClient,\n  isBrowser,\n  export_parseCookies as parseCookies,\n  parseSupabaseCookie,\n  export_serializeCookie as serializeCookie,\n  stringifySupabaseSession\n};\n/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n//# sourceMappingURL=index.mjs.map","// src/supabaseLoadClient.ts\nimport {\n  createSupabaseClient,\n  isBrowser as isBrowser2\n} from \"@supabase/auth-helpers-shared\";\n\n// src/loadStorageAdapter.ts\nimport {\n  BrowserCookieAuthStorageAdapter,\n  isBrowser\n} from \"@supabase/auth-helpers-shared\";\nvar SvelteKitLoadAuthStorageAdapter = class extends BrowserCookieAuthStorageAdapter {\n  constructor(serverSession = null, cookieOptions) {\n    super(cookieOptions);\n    this.serverSession = serverSession;\n  }\n  getItem(key) {\n    if (!isBrowser()) {\n      return JSON.stringify(this.serverSession);\n    }\n    return super.getItem(key);\n  }\n};\n\n// src/supabaseLoadClient.ts\nvar cachedBrowserClient;\nfunction createSupabaseLoadClient({\n  supabaseUrl,\n  supabaseKey,\n  event,\n  serverSession,\n  options,\n  cookieOptions\n}) {\n  var _a;\n  const browser = isBrowser2();\n  if (browser && cachedBrowserClient) {\n    return cachedBrowserClient;\n  }\n  const client = createSupabaseClient(supabaseUrl, supabaseKey, {\n    ...options,\n    global: {\n      fetch: event.fetch,\n      ...options == null ? void 0 : options.global,\n      headers: {\n        ...(_a = options == null ? void 0 : options.global) == null ? void 0 : _a.headers,\n        \"X-Client-Info\": `${\"@supabase/auth-helpers-sveltekit\"}@${\"0.10.2\"}`\n      }\n    },\n    auth: {\n      storageKey: cookieOptions == null ? void 0 : cookieOptions.name,\n      storage: new SvelteKitLoadAuthStorageAdapter(serverSession, cookieOptions)\n    }\n  });\n  if (browser) {\n    cachedBrowserClient = client;\n  }\n  return client;\n}\n\n// src/supabaseServerClient.ts\nimport {\n  createSupabaseClient as createSupabaseClient2\n} from \"@supabase/auth-helpers-shared\";\n\n// src/serverStorageAdapter.ts\nimport { CookieAuthStorageAdapter } from \"@supabase/auth-helpers-shared\";\nvar SvelteKitServerAuthStorageAdapter = class extends CookieAuthStorageAdapter {\n  constructor(event, cookieOptions, expiryMargin = 60) {\n    super(cookieOptions);\n    this.event = event;\n    this.expiryMargin = expiryMargin;\n    this.isInitialDelete = true;\n    this.currentSession = null;\n  }\n  getCookie(name) {\n    return this.event.cookies.get(name);\n  }\n  setCookie(name, value) {\n    this.event.cookies.set(name, value, {\n      httpOnly: false,\n      ...this.cookieOptions\n    });\n  }\n  deleteCookie(name) {\n    this.event.cookies.delete(name, {\n      httpOnly: false,\n      ...this.cookieOptions\n    });\n  }\n  async getItem(key) {\n    const sessionStr = await super.getItem(key);\n    if (!sessionStr) {\n      this.currentSession = null;\n      return null;\n    }\n    const session = JSON.parse(sessionStr);\n    this.currentSession = session;\n    if (session == null ? void 0 : session.expires_at) {\n      session.expires_at -= this.expiryMargin;\n    }\n    return JSON.stringify(session);\n  }\n  removeItem(key) {\n    var _a;\n    if (this.isInitialDelete && ((_a = this.currentSession) == null ? void 0 : _a.expires_at)) {\n      const now = Math.round(Date.now() / 1e3);\n      if (this.currentSession.expires_at < now + 10) {\n        this.isInitialDelete = false;\n        return;\n      }\n    }\n    super.removeItem(key);\n  }\n};\n\n// src/supabaseServerClient.ts\nfunction createSupabaseServerClient({\n  supabaseUrl,\n  supabaseKey,\n  event,\n  options,\n  cookieOptions,\n  expiryMargin\n}) {\n  var _a;\n  const client = createSupabaseClient2(supabaseUrl, supabaseKey, {\n    ...options,\n    global: {\n      ...options == null ? void 0 : options.global,\n      headers: {\n        ...(_a = options == null ? void 0 : options.global) == null ? void 0 : _a.headers,\n        \"X-Client-Info\": `${\"@supabase/auth-helpers-sveltekit\"}@${\"0.10.2\"}`\n      }\n    },\n    auth: {\n      storageKey: cookieOptions == null ? void 0 : cookieOptions.name,\n      storage: new SvelteKitServerAuthStorageAdapter(event, cookieOptions, expiryMargin)\n    }\n  });\n  return client;\n}\nexport {\n  createSupabaseLoadClient,\n  createSupabaseServerClient\n};\n//# sourceMappingURL=index.js.map","import { PUBLIC_SUPABASE_PUBLIC_KEY, PUBLIC_SUPABASE_URL } from '$env/static/public'\nimport { createSupabaseLoadClient } from '@supabase/auth-helpers-sveltekit'\nimport { redirect } from '@sveltejs/kit'\n\n/** @type {import('@sveltejs/kit').Load} */\nexport async function load(event) {\n  event.depends('supabase:auth')\n  event.depends('app:data')\n\n  const supabase = createSupabaseLoadClient({\n    supabaseUrl: PUBLIC_SUPABASE_URL,\n    supabaseKey: PUBLIC_SUPABASE_PUBLIC_KEY,\n    event: { fetch },\n    serverSession: event?.data?.session,\n  })\n  const {\n    data: { session },\n  } = await supabase.auth.getSession()\n\n  if (!session && !event.url.pathname.startsWith('/auth')) {\n    throw redirect(303, '/auth')\n  } else if (session) {\n    // const site = event.params['site']\n    const { sites, user } = await Promise.all([\n      supabase\n        .from('sites')\n        .select('id, name, url, active_deployment, collaborators (*)')\n        .order('created_at', { ascending: true }),\n      supabase\n        .from('users')\n        .select('*, server_members (admin, role), collaborators (role)')\n        .eq('id', session.user.id)\n        .single(),\n    ]).then(([{ data: sites }, { data: user }]) => {\n      const [server_member] = user.server_members\n      const [collaborator] = user.collaborators\n\n      const user_final = server_member\n        ? {\n            ...user,\n            server_member: true,\n            admin: server_member.admin,\n            role: server_member.role,\n          }\n        : {\n            ...user,\n            server_member: false,\n            admin: false,\n            role: collaborator.role,\n          }\n\n      return {\n        sites: sites || [],\n        user: user_final,\n      }\n    })\n\n    // TODO: do this w/ sql\n    const user_sites = sites?.filter(\n      (site) =>\n        /*user is server member*/ user.server_member ||\n        /*user is site collaborator*/ site.collaborators.some(\n          (collaborator) => collaborator.user === user.id\n        )\n    )\n\n    return {\n      supabase,\n      session,\n      user,\n      sites: user_sites,\n    }\n  }\n}\n","<script>\n\timport { setContext } from 'svelte'\n\timport { loadIcons, enableCache } from '@iconify/svelte'\n\timport '$lib/assets/reset.css'\n\timport { browser } from '$app/environment'\n\timport { onMount } from 'svelte'\n\timport { registerProcessors } from '@primocms/builder'\n\timport Modal from '$lib/components/Modal.svelte'\n\timport { invalidate } from '$app/navigation'\n\timport supabase_client from '$lib/supabase'\n\n\texport let data\n\n\tlet { supabase, session } = data\n\t$: ({ supabase, session } = data)\n\n\t$: session &&\n\t\tsupabase_client.auth.setSession({\n\t\t\taccess_token: session.access_token,\n\t\t\trefresh_token: session.refresh_token\n\t\t})\n\n\tonMount(() => {\n\t\tif (!supabase) return\n\t\tconst {\n\t\t\tdata: { subscription }\n\t\t} = supabase.auth.onAuthStateChange((event, _session) => {\n\t\t\tif (_session?.expires_at !== session?.expires_at) {\n\t\t\t\tinvalidate('supabase:auth')\n\t\t\t}\n\t\t})\n\t\treturn () => subscription.unsubscribe()\n\t})\n\n\tif (browser) {\n\t\timport('../compiler/processors.js').then(({ html, css }) => {\n\t\t\tregisterProcessors({ html, css })\n\t\t})\n\t\tsetContext('track', () => {})\n\t\tsetContext('DEBUGGING', new URLSearchParams(window.location.search).has('debug'))\n\t}\n\n\tloadIcons([\n\t\t'gg:spinner',\n\t\t'material-symbols:edit-square-outline-rounded',\n\t\t'pepicons-pop:trash',\n\t\t'gridicons:external'\n\t])\n\tenableCache('local')\n</script>\n\n<Modal />\n<slot />\n\n<style global lang=\"postcss\">\n\t@import url(https://fonts.bunny.net/css?family=inter:300,400,500,600,700,800);\n\n\t.primo-reset {\n\t\t@tailwind base;\n\t\tfont-family: 'Inter', serif !important;\n\t\tdirection: ltr;\n\n\t\t/* height: 100vh; */\n\t\t/* overflow: hidden; */\n\n\t\t--primo-color-brand: #35d994;\n\t\t--primo-color-brand-dark: #097548;\n\t\t--primo-color-white: white;\n\t\t--primo-color-codeblack: rgb(30, 30, 30);\n\t\t--primo-color-codeblack-opaque: rgba(30, 30, 30, 0.9);\n\n\t\t--primo-color-black: rgb(17, 17, 17);\n\t\t--primo-color-black-opaque: rgba(17, 17, 17, 0.95);\n\n\t\t--color-gray-1: rgb(245, 245, 245);\n\t\t--color-gray-2: rgb(229, 229, 229);\n\t\t--color-gray-3: rgb(212, 212, 212);\n\t\t--color-gray-4: rgb(156, 163, 175);\n\t\t--color-gray-5: rgb(115, 115, 115);\n\t\t--color-gray-6: rgb(82, 82, 82);\n\t\t--color-gray-7: rgb(64, 64, 64);\n\t\t--color-gray-8: rgb(38, 38, 38);\n\t\t--color-gray-9: rgb(23, 23, 23);\n\n\t\t--font-size-1: 0.75rem;\n\t\t--font-size-2: 0.875rem;\n\t\t--font-size-3: 1.125rem;\n\t\t--font-size-4: 1.25rem;\n\n\t\t--box-shadow-xl: 0 0 #0000, 0 0 #0000, 0 20px 25px -5px rgba(0, 0, 0, 0.1),\n\t\t\t0 10px 10px -5px rgba(0, 0, 0, 0.04);\n\n\t\t--transition-colors: background-color 0.1s, border-color 0.1s, color 0.1s, fill 0.1s,\n\t\t\tstroke 0.1s;\n\n\t\t--padding-container: 15px;\n\t\t--max-width-container: 1900px;\n\n\t\t--ring: 0px 0px 0px 2px var(--primo-color-brand);\n\n\t\t--primo-max-width-1: 30rem;\n\t\t--primo-max-width-2: 1200px;\n\t\t--primo-max-width-max: 1200px;\n\n\t\t--primo-border-radius: 5px;\n\t\t--primo-ring-brand: 0px 0px 0px 1px var(--primo-color-brand);\n\t\t--primo-ring-brand-thin: 0px 0px 0px 1px var(--primo-color-brand);\n\t\t--primo-ring-brand-thick: 0px 0px 0px 3px var(--primo-color-brand);\n\t}\n\n\tbutton,\n\ta {\n\t\tcursor: pointer;\n\t}\n\n\tbody {\n\t\tmargin: 0;\n\t}\n\n\t.primo-input {\n\t\tappearance: none;\n\t\tborder: 0;\n\t\tbackground-color: transparent;\n\t\tfont-size: inherit;\n\t\tbackground: var(--color-white);\n\t\tpadding: 0.5rem 0.75rem;\n\t\twidth: 100%;\n\n\t\t/* &:focus {\n  box-shadow: 0 0 0 1px var(--color-primored);\n  border: 0;\n}\n\n&:placeholder {\n  color: var(--color-gray-5);\n} */\n\t}\n\n\t.primo-modal {\n\t\tcolor: var(--color-gray-1);\n\t\t/* background: var(--color-gray-9); */\n\t\tpadding: 1.5rem;\n\t\tborder-radius: var(--primo-border-radius);\n\t\tmargin: 0 auto;\n\t\t/* width: 100vw; */\n\t}\n\n\t.primo-heading-xl {\n\t\tmargin-bottom: 0.5rem;\n\t\tfont-size: 1.25rem;\n\t\tline-height: 1.75rem;\n\t\tfont-weight: 700;\n\t}\n\n\t.primo-heading-lg {\n\t\tmargin-bottom: 0.25rem;\n\t\tfont-size: 1.1rem;\n\t\tline-height: 1.5rem;\n\t\tfont-weight: 700;\n\t}\n\n\t.sr-only {\n\t\tposition: absolute;\n\t\twidth: 1px;\n\t\theight: 1px;\n\t\tpadding: 0;\n\t\tmargin: -1px;\n\t\toverflow: hidden;\n\t\tclip: rect(0, 0, 0, 0);\n\t\twhite-space: nowrap;\n\t\tborder-width: 0;\n\t}\n</style>\n"],"file":"_app/immutable/nodes/0.42d910ab.js"}