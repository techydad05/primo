import{S as ee,i as te,s as se,k as b,q as H,l as k,m as E,r as z,h as p,n as $,b as G,H as _,u as le,I as K,y as R,a as S,z as C,c as D,A as j,L as F,W as be,g as T,v as Q,d as q,f as X,B as M,a2 as ae,J as re,M as ke,N as Ee,a9 as we,U as Te,af as Ie,w as qe,t as Ne,p as ne,R as ue,ag as ye}from"../chunks/index.7ce6af5d.js";import{I as J,i as Se}from"../chunks/navigation.2516ba35.js";import{p as ie}from"../chunks/stores.fb720b2c.js";import{f as De}from"../chunks/index.ffa02d79.js";import{c as Ae}from"../chunks/utils.78dc49a2.js";import{b as x,S as Oe,d as fe,h as Ve}from"../chunks/Modal.c2829365.js";import{S as Pe}from"../chunks/ServerLogo.34fd066a.js";function Ue(i){let e,t,s;return{c(){e=b("span"),t=b("span"),s=H(i[0]),this.h()},l(n){e=k(n,"SPAN",{class:!0});var l=E(e);t=k(l,"SPAN",{class:!0});var o=E(t);s=z(o,i[0]),o.forEach(p),l.forEach(p),this.h()},h(){$(t,"class","inner-letter svelte-1pg8fna"),$(e,"class","letter svelte-1pg8fna")},m(n,l){G(n,e,l),_(e,t),_(t,s)},p(n,[l]){l&1&&le(s,n[0])},i:K,o:K,d(n){n&&p(e)}}}function Be(i,e,t){let{letter:s="b"}=e;return i.$$set=n=>{"letter"in n&&t(0,s=n.letter)},[s]}class ge extends ee{constructor(e){super(),te(this,e,Be,Ue,se,{letter:0})}}function _e(i){let e,t,s,n,l,o=i[1].email+"",r,u,d,a,c,h,f,m,v,N,P,y,g,A;return s=new ge({props:{letter:i[1].email.slice(0,1)}}),f=new J({props:{icon:"mdi:sign-out"}}),{c(){e=b("div"),t=b("div"),R(s.$$.fragment),n=S(),l=b("span"),r=H(o),u=S(),d=b("hr"),a=S(),c=b("button"),h=b("div"),R(f.$$.fragment),m=S(),v=b("span"),N=H("Sign Out"),this.h()},l(L){e=k(L,"DIV",{class:!0});var O=E(e);t=k(O,"DIV",{class:!0});var I=E(t);C(s.$$.fragment,I),n=D(I),l=k(I,"SPAN",{class:!0});var U=E(l);r=z(U,o),U.forEach(p),I.forEach(p),u=D(O),d=k(O,"HR",{class:!0}),a=D(O),c=k(O,"BUTTON",{class:!0});var w=E(c);h=k(w,"DIV",{class:!0});var B=E(h);C(f.$$.fragment,B),B.forEach(p),m=D(w),v=k(w,"SPAN",{});var V=E(v);N=z(V,"Sign Out"),V.forEach(p),w.forEach(p),O.forEach(p),this.h()},h(){$(l,"class","email svelte-1u5so7j"),$(t,"class","row svelte-1u5so7j"),$(d,"class","svelte-1u5so7j"),$(h,"class","icon svelte-1u5so7j"),$(c,"class","row svelte-1u5so7j"),$(e,"class","popup svelte-1u5so7j")},m(L,O){G(L,e,O),_(e,t),j(s,t,null),_(t,n),_(t,l),_(l,r),_(e,u),_(e,d),_(e,a),_(e,c),_(c,h),j(f,h,null),_(c,m),_(c,v),_(v,N),y=!0,g||(A=F(c,"click",i[2]),g=!0)},p:K,i(L){y||(T(s.$$.fragment,L),T(f.$$.fragment,L),P||ke(()=>{P=Ee(e,De,{duration:100}),P.start()}),y=!0)},o(L){q(s.$$.fragment,L),q(f.$$.fragment,L),y=!1},d(L){L&&p(e),M(s),M(f),g=!1,A()}}}function Le(i){let e,t,s,n,l,o,r,u,d;s=new ge({props:{letter:i[1].email.slice(0,1)}}),l=new J({props:{icon:"mdi:chevron-"+(i[0]?"up":"down")}});let a=i[0]&&_e(i);return{c(){e=b("div"),t=b("button"),R(s.$$.fragment),n=S(),R(l.$$.fragment),o=S(),a&&a.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var h=E(e);t=k(h,"BUTTON",{class:!0});var f=E(t);C(s.$$.fragment,f),n=D(f),C(l.$$.fragment,f),f.forEach(p),o=D(h),a&&a.l(h),h.forEach(p),this.h()},h(){$(t,"class","open-popup svelte-1u5so7j"),$(e,"class","MenuPopup svelte-1u5so7j")},m(c,h){G(c,e,h),_(e,t),j(s,t,null),_(t,n),j(l,t,null),_(e,o),a&&a.m(e,null),r=!0,u||(d=[F(t,"click",i[3]),be(Ae.call(null,e)),F(e,"click_outside",i[4])],u=!0)},p(c,[h]){const f={};h&1&&(f.icon="mdi:chevron-"+(c[0]?"up":"down")),l.$set(f),c[0]?a?(a.p(c,h),h&1&&T(a,1)):(a=_e(c),a.c(),T(a,1),a.m(e,null)):a&&(Q(),q(a,1,1,()=>{a=null}),X())},i(c){r||(T(s.$$.fragment,c),T(l.$$.fragment,c),T(a),r=!0)},o(c){q(s.$$.fragment,c),q(l.$$.fragment,c),q(a),r=!1},d(c){c&&p(e),M(s),M(l),a&&a.d(),u=!1,ae(d)}}}function Re(i,e,t){let s;re(i,ie,a=>t(5,s=a));let n=!1;const{user:l,supabase:o}=s.data;async function r(){await o.auth.signOut(),window.location.reload()}return[n,l,r,()=>t(0,n=!n),()=>t(0,n=!1)]}class Ce extends ee{constructor(e){super(),te(this,e,Re,Le,se,{})}}function de(i){let e,t,s,n;return{c(){e=b("button"),t=H("Members"),this.h()},l(l){e=k(l,"BUTTON",{class:!0});var o=E(e);t=z(o,"Members"),o.forEach(p),this.h()},h(){$(e,"class","link svelte-w4v1k2")},m(l,o){G(l,e,o),_(e,t),s||(n=F(e,"click",i[1]),s=!0)},p:K,d(l){l&&p(e),s=!1,n()}}}function he(i){let e,t,s,n,l,o;return l=new J({props:{icon:"gridicons:external"}}),{c(){e=b("a"),t=b("span"),s=H("Docs"),n=S(),R(l.$$.fragment),this.h()},l(r){e=k(r,"A",{class:!0,href:!0,target:!0});var u=E(e);t=k(u,"SPAN",{class:!0});var d=E(t);s=z(d,"Docs"),d.forEach(p),n=D(u),C(l.$$.fragment,u),u.forEach(p),this.h()},h(){$(t,"class","docs"),$(e,"class","link with-icon svelte-w4v1k2"),$(e,"href","https://docs.primocms.org/"),$(e,"target","blank")},m(r,u){G(r,e,u),_(e,t),_(t,s),_(e,n),j(l,e,null),o=!0},i(r){o||(T(l.$$.fragment,r),o=!0)},o(r){q(l.$$.fragment,r),o=!1},d(r){r&&p(e),M(l)}}}function je(i){let e,t,s,n,l,o,r,u,d;s=new Pe({});let a=i[0].data.user.admin&&de(i),c=i[0].data.user.role==="DEV"&&he();return u=new Ce({}),{c(){e=b("header"),t=b("div"),R(s.$$.fragment),n=S(),l=b("nav"),a&&a.c(),o=S(),c&&c.c(),r=S(),R(u.$$.fragment),this.h()},l(h){e=k(h,"HEADER",{role:!0,"aria-label":!0,class:!0});var f=E(e);t=k(f,"DIV",{class:!0});var m=E(t);C(s.$$.fragment,m),m.forEach(p),n=D(f),l=k(f,"NAV",{class:!0});var v=E(l);a&&a.l(v),o=D(v),c&&c.l(v),r=D(v),C(u.$$.fragment,v),v.forEach(p),f.forEach(p),this.h()},h(){$(t,"class","logo svelte-w4v1k2"),$(l,"class","nav svelte-w4v1k2"),$(e,"role","navigation"),$(e,"aria-label","main navigation"),$(e,"class","svelte-w4v1k2")},m(h,f){G(h,e,f),_(e,t),j(s,t,null),_(e,n),_(e,l),a&&a.m(l,null),_(l,o),c&&c.m(l,null),_(l,r),j(u,l,null),d=!0},p(h,[f]){h[0].data.user.admin?a?a.p(h,f):(a=de(h),a.c(),a.m(l,o)):a&&(a.d(1),a=null),h[0].data.user.role==="DEV"?c?f&1&&T(c,1):(c=he(),c.c(),T(c,1),c.m(l,r)):c&&(Q(),q(c,1,1,()=>{c=null}),X())},i(h){d||(T(s.$$.fragment,h),T(c),T(u.$$.fragment,h),d=!0)},o(h){q(s.$$.fragment,h),q(c),q(u.$$.fragment,h),d=!1},d(h){h&&p(e),M(s),a&&a.d(),c&&c.d(),M(u)}}}function Me(i,e,t){let s;return re(i,ie,l=>t(0,s=l)),[s,()=>x("INVITE_COLLABORATORS")]}class Ge extends ee{constructor(e){super(),te(this,e,Me,je,se,{})}}function pe(i,e,t){const s=i.slice();return s[16]=e[t],s[17]=e,s[18]=t,s}function He(i){let e,t,s=i[16].name+"",n,l,o,r,u;return o=new J({props:{icon:"ic:round-chevron-right"}}),{c(){e=b("a"),t=b("span"),n=H(s),l=S(),R(o.$$.fragment),this.h()},l(d){e=k(d,"A",{"data-sveltekit-prefetch":!0,href:!0,class:!0});var a=E(e);t=k(a,"SPAN",{class:!0});var c=E(t);n=z(c,s),c.forEach(p),l=D(a),C(o.$$.fragment,a),a.forEach(p),this.h()},h(){$(t,"class","svelte-1vte7q0"),$(e,"data-sveltekit-prefetch",""),$(e,"href",r=i[16].url),$(e,"class","svelte-1vte7q0")},m(d,a){G(d,e,a),_(e,t),_(t,n),_(e,l),j(o,e,null),u=!0},p(d,a){(!u||a&1)&&s!==(s=d[16].name+"")&&le(n,s),(!u||a&1&&r!==(r=d[16].url))&&$(e,"href",r)},i(d){u||(T(o.$$.fragment,d),u=!0)},o(d){q(o.$$.fragment,d),u=!1},d(d){d&&p(e),M(o)}}}function ze(i){let e,t,s,n;function l(){return i[9](i[16])}function o(){i[10].call(t,i[17],i[18])}return{c(){e=b("form"),t=b("input"),this.h()},l(r){e=k(r,"FORM",{class:!0});var u=E(e);t=k(u,"INPUT",{class:!0,type:!0}),u.forEach(p),this.h()},h(){$(t,"class","reset-input svelte-1vte7q0"),$(t,"type","text"),$(e,"class","svelte-1vte7q0")},m(r,u){G(r,e,u),_(e,t),i[8](t),ue(t,i[16].name),s||(n=[F(t,"blur",l),F(t,"input",o),F(e,"submit",ye(i[11]))],s=!0)},p(r,u){i=r,u&1&&t.value!==i[16].name&&ue(t,i[16].name)},i:K,o:K,d(r){r&&p(e),i[8](null),s=!1,ae(n)}}}function Fe(i){let e,t=i[16].id+"",s,n,l;return{c(){e=b("button"),s=H(t),this.h()},l(o){e=k(o,"BUTTON",{style:!0,class:!0});var r=E(e);s=z(r,t),r.forEach(p),this.h()},h(){ne(e,"font-size","0.75rem"),ne(e,"cursor","pointer"),ne(e,"text-align","left"),$(e,"class","svelte-1vte7q0")},m(o,r){G(o,e,r),_(e,s),n||(l=F(e,"click",i[12]),n=!0)},p(o,r){r&1&&t!==(t=o[16].id+"")&&le(s,t)},d(o){o&&p(e),n=!1,l()}}}function me(i){let e,t,s,n,l,o,r,u,d,a,c,h,f,m,v,N,P,y,g,A,L;s=new J({props:{icon:"clarity:users-solid"}});function O(){return i[13](i[16])}d=new J({props:{icon:"material-symbols:edit-square-outline-rounded"}});function I(){return i[14](i[16])}v=new J({props:{icon:"pepicons-pop:trash"}});function U(){return i[15](i[16])}return{c(){e=b("div"),t=b("button"),R(s.$$.fragment),n=S(),l=b("span"),o=H("Collaborators"),r=S(),u=b("button"),R(d.$$.fragment),a=S(),c=b("span"),h=H("Rename"),f=S(),m=b("button"),R(v.$$.fragment),N=S(),P=b("span"),y=H("Delete"),this.h()},l(w){e=k(w,"DIV",{class:!0});var B=E(e);t=k(B,"BUTTON",{class:!0});var V=E(t);C(s.$$.fragment,V),n=D(V),l=k(V,"SPAN",{class:!0});var Y=E(l);o=z(Y,"Collaborators"),Y.forEach(p),V.forEach(p),r=D(B),u=k(B,"BUTTON",{class:!0});var W=E(u);C(d.$$.fragment,W),a=D(W),c=k(W,"SPAN",{class:!0});var oe=E(c);h=z(oe,"Rename"),oe.forEach(p),W.forEach(p),f=D(B),m=k(B,"BUTTON",{class:!0});var Z=E(m);C(v.$$.fragment,Z),N=D(Z),P=k(Z,"SPAN",{class:!0});var ce=E(P);y=z(ce,"Delete"),ce.forEach(p),Z.forEach(p),B.forEach(p),this.h()},h(){$(l,"class","svelte-1vte7q0"),$(t,"class","site-button svelte-1vte7q0"),$(c,"class","svelte-1vte7q0"),$(u,"class","site-button svelte-1vte7q0"),$(P,"class","svelte-1vte7q0"),$(m,"class","site-button svelte-1vte7q0"),$(e,"class","buttons svelte-1vte7q0")},m(w,B){G(w,e,B),_(e,t),j(s,t,null),_(t,n),_(t,l),_(l,o),_(e,r),_(e,u),j(d,u,null),_(u,a),_(u,c),_(c,h),_(e,f),_(e,m),j(v,m,null),_(m,N),_(m,P),_(P,y),g=!0,A||(L=[F(t,"click",O),F(u,"click",I),F(m,"click",U)],A=!0)},p(w,B){i=w},i(w){g||(T(s.$$.fragment,w),T(d.$$.fragment,w),T(v.$$.fragment,w),g=!0)},o(w){q(s.$$.fragment,w),q(d.$$.fragment,w),q(v.$$.fragment,w),g=!1},d(w){w&&p(e),M(s),M(d),M(v),A=!1,ae(L)}}}function ve(i,e){let t,s,n,l,o,r,u,d,a,c,h,f=e[16].url+"",m,v,N=Te("DEBUGGING"),P,y;n=new Oe({props:{site:e[16]}});const g=[ze,He],A=[];function L(U,w){return U[1].id===U[16].id?0:1}d=L(e),a=A[d]=g[d](e);let O=N&&Fe(e),I=e[2].data.user.admin&&me(e);return{key:i,first:null,c(){t=b("li"),s=b("a"),R(n.$$.fragment),o=S(),r=b("div"),u=b("div"),a.c(),c=S(),h=b("span"),m=H(f),v=S(),O&&O.c(),P=S(),I&&I.c(),this.h()},l(U){t=k(U,"LI",{class:!0});var w=E(t);s=k(w,"A",{class:!0,href:!0});var B=E(s);C(n.$$.fragment,B),B.forEach(p),o=D(w),r=k(w,"DIV",{class:!0});var V=E(r);u=k(V,"DIV",{class:!0});var Y=E(u);a.l(Y),Y.forEach(p),c=D(V),h=k(V,"SPAN",{class:!0});var W=E(h);m=z(W,f),W.forEach(p),v=D(V),O&&O.l(V),P=D(V),I&&I.l(V),V.forEach(p),w.forEach(p),this.h()},h(){$(s,"class","site-link svelte-1vte7q0"),$(s,"href",l=e[16].url),$(u,"class","site-name"),$(h,"class","site-url svelte-1vte7q0"),$(r,"class","site-info svelte-1vte7q0"),$(t,"class","svelte-1vte7q0"),this.first=t},m(U,w){G(U,t,w),_(t,s),j(n,s,null),_(t,o),_(t,r),_(r,u),A[d].m(u,null),_(r,c),_(r,h),_(h,m),_(r,v),O&&O.m(r,null),_(r,P),I&&I.m(r,null),y=!0},p(U,w){e=U;const B={};w&1&&(B.site=e[16]),n.$set(B),(!y||w&1&&l!==(l=e[16].url))&&$(s,"href",l);let V=d;d=L(e),d===V?A[d].p(e,w):(Q(),q(A[V],1,1,()=>{A[V]=null}),X(),a=A[d],a?a.p(e,w):(a=A[d]=g[d](e),a.c()),T(a,1),a.m(u,null)),(!y||w&1)&&f!==(f=e[16].url+"")&&le(m,f),N&&O.p(e,w),e[2].data.user.admin?I?(I.p(e,w),w&4&&T(I,1)):(I=me(e),I.c(),T(I,1),I.m(r,null)):I&&(Q(),q(I,1,1,()=>{I=null}),X())},i(U){y||(T(n.$$.fragment,U),T(a),T(I),y=!0)},o(U){q(n.$$.fragment,U),q(a),q(I),y=!1},d(U){U&&p(t),M(n),A[d].d(),O&&O.d(),I&&I.d()}}}function $e(i){let e,t,s,n,l,o,r,u;const d=[We,Je],a=[];function c(h,f){return h[4]?0:1}return s=c(i),n=a[s]=d[s](i),{c(){e=b("li"),t=b("button"),n.c(),l=H(`
              Create a site`),this.h()},l(h){e=k(h,"LI",{class:!0});var f=E(e);t=k(f,"BUTTON",{class:!0});var m=E(t);n.l(m),l=z(m,`
              Create a site`),m.forEach(p),f.forEach(p),this.h()},h(){$(t,"class","create-site svelte-1vte7q0"),$(e,"class","svelte-1vte7q0")},m(h,f){G(h,e,f),_(e,t),a[s].m(t,null),_(t,l),o=!0,r||(u=F(t,"click",i[5]),r=!0)},p:K,i(h){o||(T(n),o=!0)},o(h){q(n),o=!1},d(h){h&&p(e),a[s].d(),r=!1,u()}}}function Je(i){let e,t,s;return t=new J({props:{icon:"ic:round-plus"}}),{c(){e=b("div"),R(t.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var l=E(e);C(t.$$.fragment,l),l.forEach(p),this.h()},h(){$(e,"class","icon svelte-1vte7q0")},m(n,l){G(n,e,l),j(t,e,null),s=!0},i(n){s||(T(t.$$.fragment,n),s=!0)},o(n){q(t.$$.fragment,n),s=!1},d(n){n&&p(e),M(t)}}}function We(i){let e,t,s;return t=new J({props:{icon:"eos-icons:loading"}}),{c(){e=b("div"),R(t.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var l=E(e);C(t.$$.fragment,l),l.forEach(p),this.h()},h(){$(e,"class","icon svelte-1vte7q0")},m(n,l){G(n,e,l),j(t,e,null),s=!0},i(n){s||(T(t.$$.fragment,n),s=!0)},o(n){q(t.$$.fragment,n),s=!1},d(n){n&&p(e),M(t)}}}function Ke(i){let e,t,s,n,l,o,r=[],u=new Map,d,a;s=new Ge({});let c=i[0].sites;const h=m=>m[16].id;for(let m=0;m<c.length;m+=1){let v=pe(i,c,m),N=h(v);u.set(N,r[m]=ve(N,v))}let f=i[0].user.server_member&&$e(i);return{c(){e=b("main"),t=b("div"),R(s.$$.fragment),n=S(),l=b("div"),o=b("ul");for(let m=0;m<r.length;m+=1)r[m].c();d=S(),f&&f.c(),this.h()},l(m){e=k(m,"MAIN",{class:!0});var v=E(e);t=k(v,"DIV",{class:!0});var N=E(t);C(s.$$.fragment,N),n=D(N),l=k(N,"DIV",{class:!0});var P=E(l);o=k(P,"UL",{class:!0});var y=E(o);for(let g=0;g<r.length;g+=1)r[g].l(y);d=D(y),f&&f.l(y),y.forEach(p),P.forEach(p),N.forEach(p),v.forEach(p),this.h()},h(){$(o,"class","sites svelte-1vte7q0"),$(l,"class","sites-container svelte-1vte7q0"),$(t,"class","container svelte-1vte7q0"),$(e,"class","primo-reset svelte-1vte7q0")},m(m,v){G(m,e,v),_(e,t),j(s,t,null),_(t,n),_(t,l),_(l,o);for(let N=0;N<r.length;N+=1)r[N]&&r[N].m(o,null);_(o,d),f&&f.m(o,null),a=!0},p(m,[v]){v&207&&(c=m[0].sites,Q(),r=we(r,v,h,1,m,c,u,o,Ie,ve,d,pe),X()),m[0].user.server_member?f?(f.p(m,v),v&1&&T(f,1)):(f=$e(m),f.c(),T(f,1),f.m(o,null)):f&&(Q(),q(f,1,1,()=>{f=null}),X())},i(m){if(!a){T(s.$$.fragment,m);for(let v=0;v<c.length;v+=1)T(r[v]);T(f),a=!0}},o(m){q(s.$$.fragment,m);for(let v=0;v<r.length;v+=1)q(r[v]);q(f),a=!1},d(m){m&&p(e),M(s);for(let v=0;v<r.length;v+=1)r[v].d();f&&f.d()}}}function Qe(i,e,t){let s;re(i,ie,g=>t(2,s=g));let{data:n}=e;function l(g){x({id:"INVITE_SITE_COLLABORATOR",props:{site:g}})}let o;function r(){x({id:"CREATE_SITE",props:{onSuccess:async(g,A)=>{await fe.create(g,A),Se("app:data"),Ve()}}})}async function u(g){x({id:"DELETE_SITE",props:{site:g}})}async function d(g,A){await fe.update(g,{name:A})}let a={id:null,element:null};function c(g){qe[g?"unshift":"push"](()=>{a.element=g,t(1,a)})}const h=g=>d(g.id,g.name);function f(g,A){g[A].name=this.value,t(0,n)}const m=()=>t(1,a={id:null,element:null}),v=g=>{navigator.clipboard.writeText(g.target.innerText),g.target.style.opacity="0.5"},N=g=>l(g),P=async g=>{t(1,a={id:g.id,element:null}),await Ne(),a.element.focus()},y=g=>u(g);return i.$$set=g=>{"data"in g&&t(0,n=g.data)},[n,a,s,l,o,r,u,d,c,h,f,m,v,N,P,y]}class lt extends ee{constructor(e){super(),te(this,e,Qe,Ke,se,{data:0})}}export{lt as component};
//# sourceMappingURL=3.8228ebed.js.map
