{"version":3,"file":"converter.1113586f.js","sources":["../../../../../../node_modules/@primocms/builder/dist/converter.js"],"sourcesContent":["import _ from 'lodash-es'\nimport { v4 as uuidv4 } from 'uuid';\nimport { createUniqueID } from \"./utilities\";\nimport { getEmptyValue } from './utils.js'\n\nconst Field = (field) => {\n  if (field.type === 'content') {\n    field.type = 'markdown'\n  }\n  delete field.default\n  return {\n    ...field,\n    fields: field.fields.map(Field)\n  }\n}\n\n/** @returns {import('./').Site_Data} */\nexport function validate_site_structure_v2(site) {\n\n  const new_site_id = uuidv4()\n\n  // current site version -> replace IDs & return\n  if (site.version === 2) {\n    const new_page_ids = new Map()\n    const new_symbol_ids = new Map()\n\n    const parent_pages = site.pages.filter(p => p.parent === null).map(page => {\n      const new_id = uuidv4()\n      new_page_ids.set(page.id, new_id)\n      return ({\n        ...page,\n        id: new_id,\n        site: new_site_id\n      })\n    })\n    const child_pages = site.pages.filter(p => p.parent !== null)\n\n    return {\n      ...site,\n      site: {\n        ...site.site,\n        id: new_site_id\n      },\n      pages: [\n        ...parent_pages,\n        ...child_pages.map(page => {\n          const new_id = uuidv4()\n          new_page_ids.set(page.id, new_id)\n          return ({\n            ...page,\n            id: new_id,\n            site: new_site_id,\n            parent: new_page_ids.get(page.parent)\n          })\n        })\n      ],\n      symbols: site.symbols.map(s => {\n        const new_id = uuidv4()\n        new_symbol_ids.set(s.id, new_id)\n        return ({\n          ...s,\n          id: new_id,\n          site: new_site_id\n        })\n      }),\n      sections: site.sections.map(s => ({\n        ...s,\n        id: uuidv4(),\n        symbol: new_symbol_ids.get(s.symbol),\n        page: new_page_ids.get(s.page)\n      })),\n    }\n  }\n\n  site = validateSiteStructure(site)\n\n  const Symbol = (symbol) => {\n    const content = Object.entries(site.content).reduce((accumulator, [locale, value]) => {\n      accumulator[locale] = {}\n      symbol.fields.forEach(field => {\n        accumulator[locale][field.key] = getEmptyValue(field)\n      })\n      return accumulator\n    }, {})\n\n    return {\n      id: uuidv4(),\n      site: new_site_id,\n      name: symbol.name,\n      code: symbol.code,\n      fields: symbol.fields.map(Field),\n      _old_id: symbol.id,\n      content\n    }\n  }\n\n  const symbols = [...site.symbols.map(symbol => Symbol(symbol)), {\n    id: uuidv4(),\n    site: new_site_id,\n    name: 'Content',\n    code: {\n      html: `<div class=\"section\"><div class=\"section-container content\">{@html content.html}</div></div>`,\n      css: `\n.content {\n\n  :global(img) {\n    width: 100%;\n    margin: 2rem 0;\n    box-shadow: var(--box-shadow);\n    border-radius: var(--border-radius);\n  }\n\n  :global(p) {\n    padding: 0.25rem 0;\n    line-height: 1.5;\n  }\n\n  :global(a) {\n    text-decoration: underline;\n  }\n\n  :global(h1) {\n    font-size: 3rem;\n    font-weight: 700;\n    margin-bottom: 1rem;\n  }\n\n  :global(h2) {\n    font-size: 2.25rem;\n    font-weight: 600;\n    margin-bottom: 0.5rem;\n  }\n\n  :global(h3) {\n    font-size: 1.75rem; \n    font-weight: 600;\n    margin-bottom: 0.25rem;\n  }\n\n  :global(ul) {\n    list-style: disc;\n    padding: 0.5rem 0;\n    padding-left: 1.25rem;\n  }\n\n  :global(ol) {\n    list-style: decimal;\n    padding: 0.5rem 0;\n    padding-left: 1.25rem;\n  }\n\n  :global(blockquote) {\n    padding: 2rem;\n    box-shadow: var(--box-shadow);\n    border-radius: var(--border-radius);\n  }\n}\n      `,\n      js: ''\n    },\n    fields: [{\n      id: createUniqueID(),\n      key: 'content',\n      label: 'Content',\n      type: 'markdown',\n      fields: [],\n      options: {},\n      is_static: false,\n    }],\n    content: {\n      en: {\n        'content': {\n          markdown: '# This is a content block',\n          html: '<h1>This is a content block</h1>'\n        }\n      }\n    },\n    _old_id: null\n  }]\n\n  /** @returns {import('./').Page} */\n  const Page = (page) => {\n\n    const content = Object.entries(site.content).reduce((accumulator, [locale, value]) => {\n      accumulator[locale] = {}\n      page.fields.forEach(field => {\n        accumulator[locale][field.key] = value?.[page.id]?.[field.key] || getEmptyValue(field)\n      })\n      return accumulator\n    }, {})\n\n    return {\n      id: uuidv4(),\n      name: page.name,\n      url: page.id,\n      code: page.code,\n      fields: page.fields.map(Field) || [],\n      sections: page.sections, // for later use, to be removed\n      pages: page.pages || [], // for later use, to be removed\n      content,\n      site: new_site_id\n    }\n  }\n\n  /** @returns {import('./').Section} */\n  const Section = (section, page) => {\n\n    let symbol\n    let content\n\n    if (section.type === 'component') {\n      symbol = symbols.find(s => s._old_id === section.symbolID)\n      content = Object.entries(site.content).reduce((accumulator, [locale, value]) => {\n        accumulator[locale] = value?.[page.url]?.[section.id]\n        return accumulator\n      }, {})\n    } else if (section.type === 'content') {\n      symbol = symbols.at(-1)\n      content = Object.entries(site.content).reduce((accumulator, [locale, value]) => {\n        const html = value?.[page.url]?.[section.id]\n        accumulator[locale] = {\n          content: {\n            html,\n            markdown: html\n          }\n        }\n        return accumulator\n      }, {})\n    }\n\n    return ({\n      id: uuidv4(),\n      page: page.id,\n      symbol: symbol.id,\n      content,\n      index: page.sections.findIndex((s) => s.id === section.id)\n    })\n  }\n\n  const pages = _.flatten(site.pages.map(page => [Page(page), ...page.pages.map(child => Page(child))]))\n\n  // children need to be derived after page IDs have been assigned\n  const pages_with_children = pages.map(page => {\n    const parent = pages.find(p => p.pages.find(c => c.id === page.url))\n    return {\n      ...page,\n      parent: parent?.id || null\n    }\n  })\n\n  /** @returns {Array<import('./').Section>} */\n  const sections = _.flatten(pages.map(page => page.sections.map(s => Section(s, page))))\n\n  const content = Object.entries(site.content).reduce((accumulator, [locale, value]) => {\n    accumulator[locale] = {}\n    site.fields.forEach(field => {\n      accumulator[locale][field.key] = value?.[field.key] || getEmptyValue(field)\n    })\n    return accumulator\n  }, {\n    en: {}\n  })\n\n  return {\n    site: {\n      id: new_site_id,\n      url: site.id,\n      name: site.name,\n      code: site.code,\n      fields: site.fields,\n      content\n    },\n    pages: pages_with_children.map(page => {\n      delete page.sections\n      delete page.pages\n      return page\n    }),\n    sections,\n    symbols: symbols.map(symbol => {\n      delete symbol._old_id\n      return symbol\n    })\n  }\n\n}\n\nexport function validate_symbol(symbol) {\n  if (!symbol.content || _.isEmpty(symbol.content)) {\n    // turn symbol fields into content object\n    const content = Object.entries(symbol.fields).reduce((accumulator, [_, field]) => {\n      accumulator[field.key] = getEmptyValue(field)\n      return accumulator\n    }, {})\n\n    symbol.content = {\n      'en': content\n    }\n  }\n\n  symbol.fields = symbol.fields.map(Field)\n\n  return symbol\n}\n\nexport function validateSiteStructure(site) {\n\n  let validated\n  try {\n    if (defined_structure(site, ['html'])) validated = convertSite(site)\n    else if (defined_structure(site, ['content'])) validated = updateSite(site)\n    else validated = null\n  } catch (e) {\n    console.warn('Site is invalid', site)\n    validated = null\n  }\n\n  return validated\n\n  function updateSite(site) {\n    return {\n      ...site,\n      fields: convertFields(site.fields),\n      symbols: site.symbols.map(symbol => ({\n        ...symbol,\n        fields: convertFields(symbol.fields)\n      }))\n    }\n  }\n\n  function convertSite(site) {\n\n    const siteContent = {}\n    const updated = {\n      id: site.id,\n      name: site.name,\n      pages: convertPages(site.pages, (page) => {\n        siteContent[page.id] = page.content\n      }),\n      code: convertCode(site),\n      symbols: convertSymbols(site.symbols),\n      fields: convertFields(site.fields, (field) => {\n        siteContent[field.id] = field.content\n      }),\n      content: {\n        en: null\n      }\n    }\n    updated.content['en'] = siteContent\n\n    return updated\n\n    function convertPages(pages = [], fn = (_) => { }) {\n      return pages.map((page) => {\n        const pageContent = {}\n        const updatedPage = {\n          id: page.id,\n          name: page.name || page.title || '',\n          sections: convertSections(page.sections, (section) => {\n            pageContent[section.id] = section.content\n          }),\n          code: convertCode(page),\n          fields: convertFields(page.fields, (field) => {\n            pageContent[field.id] = field.content\n          }),\n          pages: convertPages(page.pages)\n        }\n        fn({\n          id: page.id,\n          content: pageContent\n        })\n        return updatedPage\n      })\n\n      function convertSections(sections, cb) {\n        return sections.filter(s => s.type !== 'options').map(section => {\n          cb({\n            id: section.id,\n            content: section.value.fields ? _.chain(section.value.fields).keyBy('key').mapValues('value').value() : section.value.html\n          })\n          return {\n            id: section.id,\n            type: section.type,\n            ...(section.symbolID ? { symbolID: section.symbolID } : {})\n          }\n        })\n      }\n    }\n\n    function convertCode(obj) {\n      return {\n        html: obj.html,\n        css: obj.css,\n        js: obj.js || ''\n      }\n    }\n  }\n\n}\n\nexport function convertSymbols(symbols) {\n  return symbols.map(symbol => ({\n    type: 'symbol',\n    id: symbol.id,\n    name: symbol.title || '',\n    code: {\n      html: symbol.value.html,\n      css: symbol.value.css,\n      js: symbol.value.js\n    },\n    fields: convertFields(symbol.value.fields)\n  }))\n}\n\nexport function convertFields(fields = [], fn = () => { }) {\n  return fields.map(field => {\n    fn({\n      id: field.key,\n      content: field.value\n    })\n    return {\n      id: field.id,\n      key: field.key,\n      label: field.label,\n      type: field.type,\n      fields: convertFields(field.fields),\n      options: field.options || {},\n      default: field.default || '',\n      is_static: field.is_static || false,\n    }\n  })\n}\n\n\n// https://stackoverflow.com/questions/24924464/how-to-check-if-object-structure-exists\nfunction defined_structure(obj, attrs) {\n  var tmp = obj;\n  for (let i = 0; i < attrs.length; ++i) {\n    if (tmp[attrs[i]] == undefined)\n      return false;\n    tmp = tmp[attrs[i]];\n  }\n  return true;\n}"],"names":["Field","field","validate_site_structure_v2","site","new_site_id","uuidv4","new_page_ids","new_symbol_ids","parent_pages","p","page","new_id","child_pages","s","validateSiteStructure","Symbol","symbol","content","accumulator","locale","value","getEmptyValue","symbols","createUniqueID","Page","_a","Section","section","html","pages","_","child","pages_with_children","parent","c","sections","validate_symbol","validated","defined_structure","convertSite","updateSite","convertFields","siteContent","updated","convertPages","convertCode","convertSymbols","fn","pageContent","updatedPage","convertSections","cb","obj","fields","attrs","tmp","i"],"mappings":"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","x_google_ignoreList":[0]}