{"version":3,"file":"2-By6zIF5R.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/_site_/_layout.js","../../../.svelte-kit/adapter-node/nodes/2.js"],"sourcesContent":["import { r as redirect } from \"../../../chunks/index.js\";\nasync function load({ depends, params, parent }) {\n  depends(\"app:data\");\n  const { supabase, session } = await parent();\n  if (!session) {\n    throw redirect(303, \"/auth\");\n  }\n  const site_url = params[\"site\"];\n  const client_params = params[\"page\"]?.split(\"/\") || [];\n  const page_url = client_params.pop() || \"index\";\n  const parent_url = client_params.pop() || null;\n  let site, page;\n  if (parent_url) {\n    const res = await Promise.all([\n      supabase.from(\"sites\").select().filter(\"url\", \"eq\", site_url).single(),\n      supabase.from(\"pages\").select(`*, site!inner(id, url), parent!inner(id, url)`).match({\n        url: page_url,\n        \"site.url\": site_url,\n        \"parent.url\": parent_url\n      }).single()\n    ]);\n    site = res[0][\"data\"];\n    page = res[1][\"data\"];\n  } else {\n    const res = await Promise.all([\n      supabase.from(\"sites\").select().filter(\"url\", \"eq\", site_url).single(),\n      supabase.from(\"pages\").select(`*, site!inner(id, url)`).match({\n        url: page_url,\n        \"site.url\": site_url\n      }).is(\"parent\", null).single()\n    ]);\n    site = res[0][\"data\"];\n    page = res[1][\"data\"];\n  }\n  if (!site) {\n    throw redirect(303, \"/\");\n  } else if (!page && page_url !== \"index\") {\n    throw redirect(303, `/${site_url}/index`);\n  }\n  const [{ data: pages }, { data: symbols }, { data: sections }] = await Promise.all([\n    supabase.from(\"pages\").select().match({ site: site.id }).order(\"created_at\", { ascending: true }),\n    supabase.from(\"symbols\").select().match({ site: site.id }).order(\"index\", { ascending: true }),\n    supabase.from(\"sections\").select(\"id, page, index, content, symbol\").match({ page: page[\"id\"] }).order(\"index\", { ascending: true })\n  ]);\n  return {\n    site,\n    page,\n    pages,\n    sections,\n    symbols\n  };\n}\nexport {\n  load\n};\n//# sourceMappingURL=_layout.js.map\n","import * as universal from '../entries/pages/_site_/_layout.js';\n\nexport const index = 2;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/_site_/_layout.svelte.js')).default;\nexport { universal };\nexport const universal_id = \"src/routes/[site]/+layout.js\";\nexport const imports = [\"_app/immutable/nodes/2.eb6842b4.js\",\"_app/immutable/chunks/index.ade5cbd2.js\",\"_app/immutable/chunks/control.f5b05b5f.js\",\"_app/immutable/chunks/index.7ce6af5d.js\",\"_app/immutable/chunks/Page.svelte_svelte_type_style_lang.5ee686e0.js\",\"_app/immutable/chunks/preload-helper.a4192956.js\",\"_app/immutable/chunks/index.ffa02d79.js\",\"_app/immutable/chunks/navigation.2516ba35.js\",\"_app/immutable/chunks/singletons.d2d14c82.js\",\"_app/immutable/chunks/stores.fb720b2c.js\",\"_app/immutable/chunks/converter.1113586f.js\",\"_app/immutable/chunks/index.0e6ed1ec.js\"];\nexport const stylesheets = [\"_app/immutable/assets/Page.c37a3656.css\",\"_app/immutable/assets/CodeMirror.f33dab8f.css\"];\nexport const fonts = [\"_app/immutable/assets/fira-code-cyrillic-ext-400-normal.aeaf7f0a.woff2\",\"_app/immutable/assets/fira-code-cyrillic-ext-400-normal.96b1b870.woff\",\"_app/immutable/assets/fira-code-cyrillic-400-normal.dac6dde5.woff2\",\"_app/immutable/assets/fira-code-cyrillic-400-normal.b0cb6f39.woff\",\"_app/immutable/assets/fira-code-greek-ext-400-normal.9abd2774.woff2\",\"_app/immutable/assets/fira-code-greek-ext-400-normal.8c540835.woff\",\"_app/immutable/assets/fira-code-greek-400-normal.ab9177a1.woff2\",\"_app/immutable/assets/fira-code-greek-400-normal.f70ef159.woff\",\"_app/immutable/assets/fira-code-latin-ext-400-normal.5e162e63.woff2\",\"_app/immutable/assets/fira-code-latin-ext-400-normal.315dc11c.woff\",\"_app/immutable/assets/fira-code-latin-400-normal.2b407eb4.woff2\",\"_app/immutable/assets/fira-code-latin-400-normal.59bca7e3.woff\"];\n"],"names":[],"mappings":";;AACA,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE;AACjD,EAAE,OAAO,CAAC,UAAU,CAAC;AACrB,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,MAAM,MAAM,EAAE;AAC9C,EAAE,IAAI,CAAC,OAAO,EAAE;AAChB,IAAI,MAAM,QAAQ,CAAC,GAAG,EAAE,OAAO,CAAC;AAChC;AACA,EAAE,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC;AACjC,EAAE,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE;AACxD,EAAE,MAAM,QAAQ,GAAG,aAAa,CAAC,GAAG,EAAE,IAAI,OAAO;AACjD,EAAE,MAAM,UAAU,GAAG,aAAa,CAAC,GAAG,EAAE,IAAI,IAAI;AAChD,EAAE,IAAI,IAAI,EAAE,IAAI;AAChB,EAAE,IAAI,UAAU,EAAE;AAClB,IAAI,MAAM,GAAG,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;AAClC,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,MAAM,EAAE;AAC5E,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,6CAA6C,CAAC,CAAC,CAAC,KAAK,CAAC;AAC3F,QAAQ,GAAG,EAAE,QAAQ;AACrB,QAAQ,UAAU,EAAE,QAAQ;AAC5B,QAAQ,YAAY,EAAE;AACtB,OAAO,CAAC,CAAC,MAAM;AACf,KAAK,CAAC;AACN,IAAI,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AACzB,IAAI,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AACzB,GAAG,MAAM;AACT,IAAI,MAAM,GAAG,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;AAClC,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,MAAM,EAAE;AAC5E,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC,KAAK,CAAC;AACpE,QAAQ,GAAG,EAAE,QAAQ;AACrB,QAAQ,UAAU,EAAE;AACpB,OAAO,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC,MAAM;AAClC,KAAK,CAAC;AACN,IAAI,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AACzB,IAAI,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AACzB;AACA,EAAE,IAAI,CAAC,IAAI,EAAE;AACb,IAAI,MAAM,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC;AAC5B,GAAG,MAAM,IAAI,CAAC,IAAI,IAAI,QAAQ,KAAK,OAAO,EAAE;AAC5C,IAAI,MAAM,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;AAC7C;AACA,EAAE,MAAM,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;AACrF,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,YAAY,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;AACrG,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;AAClG,IAAI,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,kCAAkC,CAAC,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE;AACvI,GAAG,CAAC;AACJ,EAAE,OAAO;AACT,IAAI,IAAI;AACR,IAAI,IAAI;AACR,IAAI,KAAK;AACT,IAAI,QAAQ;AACZ,IAAI;AACJ,GAAG;AACH;;;;;;;ACjDY,MAAC,KAAK,GAAG;AACrB,IAAI,eAAe;AACP,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,8BAA2C,CAAC,EAAE;AAEzG,MAAC,YAAY,GAAG;AAChB,MAAC,OAAO,GAAG,CAAC,oCAAoC,CAAC,yCAAyC,CAAC,2CAA2C,CAAC,yCAAyC,CAAC,sEAAsE,CAAC,kDAAkD,CAAC,yCAAyC,CAAC,8CAA8C,CAAC,8CAA8C,CAAC,0CAA0C,CAAC,6CAA6C,CAAC,yCAAyC;AACrjB,MAAC,WAAW,GAAG,CAAC,yCAAyC,CAAC,+CAA+C;AACzG,MAAC,KAAK,GAAG,CAAC,wEAAwE,CAAC,uEAAuE,CAAC,oEAAoE,CAAC,mEAAmE,CAAC,qEAAqE,CAAC,oEAAoE,CAAC,iEAAiE,CAAC,gEAAgE,CAAC,qEAAqE,CAAC,oEAAoE,CAAC,iEAAiE,CAAC,gEAAgE;;;;"}